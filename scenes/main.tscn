[gd_scene load_steps=13 format=3 uid="uid://dp7iqge7542bm"]

[ext_resource type="PackedScene" uid="uid://djhxoy6ja30fs" path="res://scenes/bird.tscn" id="1_0s3gh"]
[ext_resource type="FontFile" uid="uid://cfjc1xfowcrc" path="res://assets/fonts/retro_computer_personal_use.ttf" id="1_2uhya"]
[ext_resource type="Script" path="res://scripts/GameManager.gd" id="1_fnr07"]
[ext_resource type="Script" path="res://scripts/parallax_background.gd" id="2_ldoq3"]
[ext_resource type="PackedScene" uid="uid://qn1ahnfaqivl" path="res://scenes/start_screen.tscn" id="2_yc65a"]
[ext_resource type="Script" path="res://scripts/pipe_handler.gd" id="3_c5oxv"]
[ext_resource type="Texture2D" uid="uid://qy3g7wtx6ppv" path="res://assets/sprites/ground_sprite.png" id="4_8fvxo"]
[ext_resource type="PackedScene" uid="uid://bomk2mnd3qpug" path="res://scenes/pipes.tscn" id="4_mfq41"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_u8c6u"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_kirdg"]
normal = Vector2(0, 1)

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_t3rog"]

[sub_resource type="Theme" id="Theme_hmc36"]
default_font = ExtResource("1_2uhya")

[node name="main" type="Node2D"]

[node name="GameManager" type="Node2D" parent="."]
script = ExtResource("1_fnr07")

[node name="bird" parent="." instance=ExtResource("1_0s3gh")]
position = Vector2(250, 640)

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]
layer = 1
script = ExtResource("2_ldoq3")

[node name="ground" type="ParallaxLayer" parent="ParallaxBackground"]
z_index = 1
motion_mirroring = Vector2(80, 0)

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/ground"]
z_index = 1
texture_repeat = 2
position = Vector2(0, 1240)
scale = Vector2(5, 5)
texture = ExtResource("4_8fvxo")
centered = false
offset = Vector2(0, -8)
region_enabled = true
region_rect = Rect2(0, 0, 144, 16)

[node name="Area2D" type="Area2D" parent="ParallaxBackground/ground"]
position = Vector2(0, 1200)

[node name="CollisionShape2D" type="CollisionShape2D" parent="ParallaxBackground/ground/Area2D"]
shape = SubResource("WorldBoundaryShape2D_u8c6u")

[node name="pipe_handler" type="Node2D" parent="."]
script = ExtResource("3_c5oxv")
pipes_scene = ExtResource("4_mfq41")

[node name="ceiling" type="StaticBody2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="ceiling"]
shape = SubResource("WorldBoundaryShape2D_kirdg")

[node name="ground" type="StaticBody2D" parent="."]
position = Vector2(0, 1201)

[node name="CollisionShape2D" type="CollisionShape2D" parent="ground"]
shape = SubResource("WorldBoundaryShape2D_t3rog")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Control" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = SubResource("Theme_hmc36")

[node name="start_screen" parent="CanvasLayer/Control" instance=ExtResource("2_yc65a")]
layout_mode = 1

[connection signal="movement_stopped" from="GameManager" to="bird" method="_on_game_manager_movement_stopped"]
[connection signal="movement_stopped" from="GameManager" to="ParallaxBackground" method="_on_game_manager_movement_stopped"]
[connection signal="movement_stopped" from="GameManager" to="pipe_handler" method="_on_game_manager_movement_stopped"]
[connection signal="body_entered" from="ParallaxBackground/ground/Area2D" to="GameManager" method="_on_ground_body_entered"]
[connection signal="body_entered" from="ParallaxBackground/ground/Area2D" to="ParallaxBackground" method="_on_ground_body_entered"]
[connection signal="pipe_collision" from="pipe_handler" to="GameManager" method="_on_pipe_collision"]
[connection signal="start_game" from="CanvasLayer/Control/start_screen" to="bird" method="_on_start_game"]
[connection signal="start_game" from="CanvasLayer/Control/start_screen" to="pipe_handler" method="_on_start_game"]
